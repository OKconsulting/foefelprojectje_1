<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>my.e-ok</title>
    <link href="themes/reset.css" rel="stylesheet" />
    <link href="themes/style.css" rel="stylesheet" />
    <link href="themes/jquery.mobile-1.4.3.min.css" rel="stylesheet" />
    <link href="themes/jquery.mobile.datepicker.css" rel="stylesheet" />
    <script src="scripts/jquery-1.10.2.min.js"></script>
    <script src="scripts/jquery.mobile-1.4.3.min.js"></script>
    <script src="scripts/jquery.mobile.datepicker.js"></script>
</head>
<body class="ui-mobile-viewport ui-overlay-c">
    <div data-role="page" id="home" data-theme="b">
        <div class="melding">
        </div>
        <div data-role="header" class="header" data-position="fixed">
            <div class="left"><a href="#home_panel"><img src="images/menu.png" /></a></div>
            <!--<div class="right"><a href="#selecteerPeriode" data-role="none" data-rel="popup" data-position-to="window" onclick="reloadSaldi();"><img src="images/herladen.png" /></a></div>-->
            <div class="center"><h1><a href="#home">my.e-ok</a></h1></div>
        </div>

        <div data-role="content" class="ui-content" role="main">
            <div id="loadingDivSaldi">
                <img src="images/gif-load_blue.gif" />
            </div>
            <form>
                <div class="ui-field-contain">
                    <select name="select-native-2" id="cboJaar" data-mini="true" data-theme="a" onchange="reloadSaldi()"></select>
                    <select name="select-native-3" id="cboPrestatieC" data-mini="true" data-theme="a" onchange="changePrestC()"></select>
                </div>
            </form>
            <table id="tblPCodes" class="ui-responsive table-stroke ui-table ui-table-columntoggle">
                <thead>
                    <tr>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="tblPCodes1">
                        <th>Verlofrecht</th>
                    </tr>
                    <tr id="tblPCodes2">
                        <th>Gebruikt</th>
                    </tr>
                    <tr id="tblPCodes3">
                        <th>Aangevraagd</th>
                    </tr>
                    <tr id="tblPCodes4">
                        <th>Beschikbaar</th>
                    </tr>
                    <tr id="tblPCodes5">
                        <th>Beschikbare uren</th>
                    </tr>
                    <tr id="tblPCodes6">
                        <th>Geldig tot</th>
                    </tr>
                </tbody>
            </table>
        </div>

        <div data-role="panel" id="home_panel" data-position="left" data-display="overlay" data-theme="b" class="ui-panel ui-panel-position-left ui-panel-display-reveal ui-body-b ui-panel-animate ui-panel-open">
            <div class="ui-panel-inner">
                <a href="#home" data-transition="none" data-rel="close" class='home_hide_panel' style='display:none;'></a>
                <ul class="menu">
                    <li><a href="#home" data-rel="close" data-transition="none"><img src="images/home.png" /><span class="lblMenuHome">Verlofsaldo</span><div class="clear-fix"></div></a></li>
                    <li><a href="#verlofAanv" data-rel="close" data-transition="none"><img src="images/kalender_black.png" /><span class="lblMenuVerlof">Verlof aanvragen</span><div class="clear-fix"></div></a></li>
                    <li><a href="#historiek" data-rel="close" data-transition="none"><img src="images/history.png" /><span class="lblMenuHistoriek">Historiek</span><div class="clear-fix"></div></a></li>
                    <li><a href="#Opties" data-rel="close" data-transition="none"><img src="images/opties.png" /><span class="lblMenuInst">Taalkeuze</span><div class="clear-fix"></div></a></li>
                    <li><a href="#About" data-rel="close" data-transition="none"><img src="images/About.png" /><span>OKc</span><div class="clear-fix"></div></a></li>
                    <li><a onclick="logout()"><img src="images/logout.png" /><span class="lblMenuLogout">Uitloggen</span><div class="clear-fix"></div></a></li>
                </ul>
            </div>
        </div>
    </div>

    <div data-role="page" id="verlofAanv" data-theme="b">
        <div class="melding">
        </div>
        <div data-role="header" class="header" data-position="fixed">
            <div class="left"><a href="#verlof_panel" data-transition="none"><img src="images/menu.png" /></a></div>
            <div class="right"><a href="#Toon-kalender" onclick="styleDteOverview()" data-role="none" data-rel="popup" data-position-to="window"><img src="images/kalender.png" /></a></div>
            <div class="center"><h1><a href="#home">my.e-ok</a></h1></div>
        </div>

        <div data-role="popup" id="Toon-kalender" class="ui-content" data-theme="a">
            <a data-rel="back" class="ui-btn">x</a>
            <div id="dteOverlay"></div>
            <div id="dteOverview" class="customDatepicker"></div>
            <div id="Legende">
                <p>Legende</p>
                <div>
                    <div>
                        <div class="kleur" style="background-color: #FFCC00;"></div>
                        <p>Wettelijke Feestdag</p>
                    </div>
                    <div>
                        <div class="kleur" style="background-color: #FFFF00;"></div>
                        <p>Betaalde inhaalrust</p>
                    </div>
                    <div>
                        <div class="kleur" style="background-color: #CCFFD1;"></div>
                        <p>Aangevraagd verlof</p>
                    </div>
                </div>
            </div>
        </div>

        <div data-role="content" class="ui-content" role="main">
            <div id="loadingDivDetailsDagen">
                <img src="images/gif-load_blue.gif" />
            </div>
            <form id="verlofAanvr">
                <fieldset>
                    <label id="lblDatVan">Datum van</label>
                    <input name="dteVan" id="dteVan" type="text" data-theme="a" onfocus="showDteVanPopup('dteVan')" oninput="clearVanDte()" readonly />
                    <!--<input name="dteVan" id="dteVan" type="text" data-role="date" data-theme="a" oninput="clearVanDte()">-->
                    <label id="lblDatTot">Datum tot</label>
                    <input name="dteTot" id="dteTot" type="text" data-theme="a" onfocus="showDteTotPopup('dteTot')" oninput="clearTotDte()" readonly />
                    <!--<input name="dteTot" id="dteTot" type="text" data-role="date" data-theme="a" oninput="clearTotDte()">-->
                    <div class="ui-btn ui-input-btn ui-corner-all ui-shadow ui-btn-a">
                        <input data-theme="b" id="btnDetailDagen" type="submit" value="Details dagen" />Details dagen</input>
                        <!--<a onclick="haalDagenOp()" href="#" data-transition="none" class="ui-btn" data-role="none" data-position-to="window">Details dagen</a>-->
                    </div>
                    <div id="dteVanPopup" class="customDatepicker"></div>
                    <div id="dteTotPopup" class="customDatepicker"></div>
                </fieldset>
                <label id="txaReden" for="txaReden">Reden van afwezigheid</label>
                <textarea id="txaRedenVal" name="txaReden" data-theme="a"></textarea>
            </form>
        </div>

        <div data-role="panel" id="verlof_panel" data-position="left" data-display="overlay" data-theme="b" class="ui-panel ui-panel-position-left ui-panel-display-reveal ui-body-b ui-panel-animate ui-panel-open">
            <div class="ui-panel-inner">
                <a href="#home" data-transition="none" data-rel="close" class='verlof_hide_panel' style='display:none;'></a>
                <ul class="menu">
                    <li><a href="#home" data-rel="close" data-transition="none"><img src="images/home.png" /><span class="lblMenuHome">Verlofsaldo</span><div class="clear-fix"></div></a></li>
                    <li><a href="#verlofAanv" data-rel="close" data-transition="none"><img src="images/kalender_black.png" /><span class="lblMenuVerlof">Verlof aanvragen</span><div class="clear-fix"></div></a></li>
                    <li><a href="#historiek" data-rel="close" data-transition="none"><img src="images/history.png" /><span class="lblMenuHistoriek">Historiek</span><div class="clear-fix"></div></a></li>
                    <li><a href="#Opties" data-rel="close" data-transition="none"><img src="images/opties.png" /><span class="lblMenuInst">Taalkeuze</span><div class="clear-fix"></div></a></li>
                    <li><a href="#About" data-rel="close" data-transition="none"><img src="images/About.png" /><span>OKc</span><div class="clear-fix"></div></a></li>
                    <li><a onclick="logout()"><img src="images/logout.png" /><span class="lblMenuLogout">Uitloggen</span><div class="clear-fix"></div></a></li>
                </ul>
            </div>
        </div>
    </div>

    <div data-role="page" id="DetailsDagen" data-theme="b">
        <div class="melding">
        </div>
        <div data-role="header" class="header" data-position="fixed">
            <div class="left"><a href="#details_panel" data-transition="none"><img src="images/menu.png" /></a></div>
            <!--<div class="right"><a href="#selecteerPeriode" data-role="none" data-rel="popup" data-position-to="window" onclick="loadAll();"><img src="images/herladen.png" /></a></div>-->
            <div class="center"><h1><a href="#home">my.e-ok</a></h1></div>
        </div>

        <div data-role="content" class="ui-content" role="main">
            <div data-role="collapsibleset" data-theme="a" data-iconpos="right" id="colSet">
            </div>
        </div>

        <div data-role="panel" id="details_panel" data-position="left" data-display="overlay" data-theme="b" class="ui-panel ui-panel-position-left ui-panel-display-reveal ui-body-b ui-panel-animate ui-panel-open">
            <div class="ui-panel-inner">
                <a href="#home" data-transition="none" data-rel="close" class='details_hide_panel' style='display:none;'></a>
                <ul class="menu">
                    <li><a href="#home" data-rel="close" data-transition="none"><img src="images/home.png" /><span class="lblMenuHome">Verlofsaldo</span><div class="clear-fix"></div></a></li>
                    <li><a href="#verlofAanv" data-rel="close" data-transition="none"><img src="images/kalender_black.png" /><span class="lblMenuVerlof">Verlof aanvragen</span><div class="clear-fix"></div></a></li>
                    <li><a href="#historiek" data-rel="close" data-transition="none"><img src="images/history.png" /><span class="lblMenuHistoriek">Historiek</span><div class="clear-fix"></div></a></li>
                    <li><a href="#Opties" data-rel="close" data-transition="none"><img src="images/opties.png" /><span class="lblMenuInst">Instellingen</span><div class="clear-fix"></div></a></li>
                    <li><a href="#About" data-rel="close" data-transition="none"><img src="images/About.png" /><span>OKc</span><div class="clear-fix"></div></a></li>
                    <li><a onclick="logout()"><img src="images/logout.png" /><span class="lblMenuLogout">Uitloggen</span><div class="clear-fix"></div></a></li>
                </ul>
            </div>
        </div>
    </div>

    <div data-role="page" id="historiek" data-theme="b">
        <div class="melding">
        </div>
        <div data-role="header" class="header" data-position="fixed">
            <div class="left"><a href="#historiek_panel" data-transition="none"><img src="images/menu.png" /></a></div>
            <!--<div class="right"><a href="#selecteerPeriode" data-role="none" data-rel="popup" data-position-to="window" onclick="loadAll();"><img src="images/herladen.png" /></a></div>-->
            <div class="center"><h1><a href="#home">my.e-ok</a></h1></div>
        </div>

        <div data-role="content" class="ui-content" role="main">
            <div id="loadingDivHist">
                <img src="images/gif-load_blue.gif" />
            </div>
            <form>
                <div class="ui-field-contain">
                    <select name="select-native-4" id="cboHistItems" data-mini="true" data-theme="a" onchange="changeHistItem()"></select>
                </div>
            </form>
            <table id="tblHist" class="ui-responsive table-stroke ui-table ui-table-columntoggle">
                <thead>
                    <tr>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="tblHist1">
                        <th>Van</th>
                    </tr>
                    <tr id="tblHist2">
                        <th>Tot en met</th>
                    </tr>
                    <tr id="tblHist3">
                        <th>Aantal dagen</th>
                    </tr>
                    <tr id="tblHist4">
                        <th>Aangevraagd op</th>
                    </tr>
                    <tr id="tblHist5">
                        <th>Status</th>
                    </tr>
                    <tr id="tblHist6">
                        <th>Behandeld door</th>
                    </tr>
                </tbody>
            </table>
        </div>

        <div data-role="panel" id="historiek_panel" data-position="left" data-display="overlay" data-theme="b" class="ui-panel ui-panel-position-left ui-panel-display-reveal ui-body-b ui-panel-animate ui-panel-open">
            <div class="ui-panel-inner">
                <a href="#home" data-transition="none" data-rel="close" class='historiek_hide_panel' style='display:none;'></a>
                <ul class="menu">
                    <li><a href="#home" data-rel="close" data-transition="none"><img src="images/home.png" /><span class="lblMenuHome">Verlofsaldo</span><div class="clear-fix"></div></a></li>
                    <li><a href="#verlofAanv" data-rel="close" data-transition="none"><img src="images/kalender_black.png" /><span class="lblMenuVerlof">Verlof aanvragen</span><div class="clear-fix"></div></a></li>
                    <li><a href="#historiek" data-rel="close" data-transition="none"><img src="images/history.png" /><span class="lblMenuHistoriek">Historiek</span><div class="clear-fix"></div></a></li>
                    <li><a href="#Opties" data-rel="close" data-transition="none"><img src="images/opties.png" /><span class="lblMenuInst">Instellingen</span><div class="clear-fix"></div></a></li>
                    <li><a href="#About" data-rel="close" data-transition="none"><img src="images/About.png" /><span>OKc</span><div class="clear-fix"></div></a></li>
                    <li><a onclick="logout()"><img src="images/logout.png" /><span class="lblMenuLogout">Uitloggen</span><div class="clear-fix"></div></a></li>
                </ul>
            </div>
        </div>
    </div>

    <div data-role="page" id="Opties" data-theme="b">
        <div class="melding">
        </div>
        <div data-role="header" class="header" data-position="fixed">
            <div class="left"><a href="#opties_panel" data-transition="none"><img src="images/menu.png" /></a></div>
            <!--<div class="right"><a href="#selecteerPeriode" data-role="none" data-rel="popup" data-position-to="window" onclick="loadAll();"><img src="images/herladen.png" /></a></div>-->
            <div class="center"><h1><a href="#home">my.e-ok</a></h1></div>
        </div>

        <div data-role="content" class="ui-content" role="main">
            <form>
                <fieldset data-role="controlgroup">
                    <input onchange="changeLang()" type="radio" name="radio-choice-v-2" data-theme="a" id="rdbNl" value="on" checked="checked">
                    <label for="rdbNl">Nederlands</label>
                    <input onchange="changeLang()" type="radio" name="radio-choice-v-2" data-theme="a" id="rdbFr" value="off">
                    <label for="rdbFr">Français</label>
                    <input onchange="changeLang()" type="radio" name="radio-choice-v-2" data-theme="a" id="rdbEn" value="other">
                    <label for="rdbEn">English</label>
                </fieldset>
            </form>
            <div id="opPageFooter">
                <img src="images/logo-okc.png" />
            </div>
        </div>

        <div data-role="panel" id="opties_panel" data-position="left" data-display="overlay" data-theme="b" class="ui-panel ui-panel-position-left ui-panel-display-reveal ui-body-b ui-panel-animate ui-panel-open">
            <div class="ui-panel-inner">
                <a href="#home" data-transition="none" data-rel="close" class='opties_hide_panel' style='display:none;'></a>
                <ul class="menu">
                    <li><a href="#home" data-rel="close" data-transition="none"><img src="images/home.png" /><span class="lblMenuHome">Verlofsaldo</span><div class="clear-fix"></div></a></li>
                    <li><a href="#verlofAanv" data-rel="close" data-transition="none"><img src="images/kalender_black.png" /><span class="lblMenuVerlof">Verlof aanvragen</span><div class="clear-fix"></div></a></li>
                    <li><a href="#historiek" data-rel="close" data-transition="none"><img src="images/history.png" /><span class="lblMenuHistoriek">Historiek</span><div class="clear-fix"></div></a></li>
                    <li><a href="#Opties" data-rel="close" data-transition="none"><img src="images/opties.png" /><span class="lblMenuInst">Instellingen</span><div class="clear-fix"></div></a></li>
                    <li><a href="#About" data-rel="close" data-transition="none"><img src="images/About.png" /><span>OKc</span><div class="clear-fix"></div></a></li>
                    <li><a onclick="logout()"><img src="images/logout.png" /><span class="lblMenuLogout">Uitloggen</span><div class="clear-fix"></div></a></li>
                </ul>
            </div>
        </div>
    </div>

    <div data-role="page" id="About" data-theme="b">
        <div class="melding">
        </div>
        <div data-role="header" class="header" data-position="fixed">
            <div class="left"><a href="#about_panel" data-transition="none"><img src="images/menu.png" /></a></div>
            <!--<div class="right"><a href="#selecteerPeriode" data-role="none" data-rel="popup" data-position-to="window" onclick="loadAll();"><img src="images/herladen.png" /></a></div>-->
            <div class="center"><h1><a href="#home">my.e-ok</a></h1></div>
        </div>

        <div data-role="content" class="ui-content" role="main">
            <div id="contactGeg">
                <p>Accent Business Park</p>
                <p>Kwadestraat 149</p>
                <p>B-8800 Roeselare</p>
                <p>contact@okc.be</p>
                <p>www.okc.be</p>
            </div>
            <div id="abPageFooter">
                <img src="images/logo-okc.png" />
            </div>
        </div>

        <div data-role="panel" id="about_panel" data-position="left" data-display="overlay" data-theme="b" class="ui-panel ui-panel-position-left ui-panel-display-reveal ui-body-b ui-panel-animate ui-panel-open">
            <div class="ui-panel-inner">
                <a href="#home" data-transition="none" data-rel="close" class='about_hide_panel' style='display:none;'></a>
                <ul class="menu">
                    <li><a href="#home" data-rel="close" data-transition="none"><img src="images/home.png" /><span class="lblMenuHome">Verlofsaldo</span><div class="clear-fix"></div></a></li>
                    <li><a href="#verlofAanv" data-rel="close" data-transition="none"><img src="images/kalender_black.png" /><span class="lblMenuVerlof">Verlof aanvragen</span><div class="clear-fix"></div></a></li>
                    <li><a href="#historiek" data-rel="close" data-transition="none"><img src="images/history.png" /><span class="lblMenuHistoriek">Historiek</span><div class="clear-fix"></div></a></li>
                    <li><a href="#Opties" data-rel="close" data-transition="none"><img src="images/opties.png" /><span class="lblMenuInst">Instellingen</span><div class="clear-fix"></div></a></li>
                    <li><a href="#About" data-rel="close" data-transition="none"><img src="images/About.png" /><span>OKc</span><div class="clear-fix"></div></a></li>
                    <li><a onclick="logout()"><img src="images/logout.png" /><span class="lblMenuLogout">Uitloggen</span><div class="clear-fix"></div></a></li>
                </ul>
            </div>
        </div>
    </div>
    <script src="scripts/DatabaseConnection.js"></script>
    <script src="scripts/jquery-ui-1.10.4.custom.js"></script>
    <script src="scripts/Vertalen.js"></script>
    <!--<script src="cordova.js"></script>-->
    <script>
        $('#loadingDivDetailsDagen').css('display', 'none');
        var verlofSaldi = null;
        var historiekItems;

        function changePrestC() {
            initSaldiTable();
            var selectedPCode = $('#cboPrestatieC')[0].selectedIndex;
            $('#tblPCodes thead tr')[0].innerHTML = '<th></th><th>' + verlofSaldi[selectedPCode].omschrijving + '</th>';
            $('#tblPCodes1')[0].innerHTML += '<td>' + verlofSaldi[selectedPCode].aantaldagen + '</td>';
            $('#tblPCodes2')[0].innerHTML += '<td>' + Math.round(verlofSaldi[selectedPCode].gebruikt * 100) / 100 + '</td>';
            $('#tblPCodes3')[0].innerHTML += '<td>' + Math.round(verlofSaldi[selectedPCode].aangevraagd * 100) / 100 + '</td>';
            $('#tblPCodes4')[0].innerHTML += '<td>' + Math.round(verlofSaldi[selectedPCode].beschikbaar * 100) / 100 + '</td>';
            $('#tblPCodes5')[0].innerHTML += '<td>' + verlofSaldi[selectedPCode].aantalUren + '</td>';
            $('#tblPCodes6')[0].innerHTML += '<td>' + verlofSaldi[selectedPCode].voordatum.split('T')[0].split('-')[2] + '/' + verlofSaldi[selectedPCode].voordatum.split('T')[0].split('-')[1] + '</td>';
        }
        function changeHistItem() {
            initHistTable();
            var selectedPCode = $('#cboHistItems')[0].selectedIndex;
            var datumStart = historiekItems[selectedPCode].start.split('T')[0];
            var datumEind = historiekItems[selectedPCode].einde.split('T')[0];

            $('#tblHist thead tr')[0].innerHTML = '<th></th><th>' + datumStart.split('-')[2] + '/' + datumStart.split('-')[1] + ' - ' + datumEind.split('-')[2] + '/' + datumEind.split('-')[1] + '</th>';
            $('#tblHist1')[0].innerHTML += '<td>' + datumStart.split('-')[2] + '/' + datumStart.split('-')[1] + '</td>';
            $('#tblHist2')[0].innerHTML += '<td>' + datumEind.split('-')[2] + '/' + datumEind.split('-')[1] + '</td>';
            $('#tblHist3')[0].innerHTML += '<td>' + historiekItems[selectedPCode].aantaldagen + '</td>';
            var aanvraagDatum = historiekItems[selectedPCode].datumaanvraag.split('T')[0];
            $('#tblHist4')[0].innerHTML += '<td>' + aanvraagDatum.split('-')[2] + '/' + aanvraagDatum.split('-')[1] + '</td>';
            $('#tblHist5')[0].innerHTML += '<td>' + historiekItems[selectedPCode].status + '</td>';
            $('#tblHist6')[0].innerHTML += '<td>' + historiekItems[selectedPCode].naam2 + '</td>';
        }
       
        var timeout;

        var iJaar = new Date().getFullYear();
        for (i = 0; i <= 1; i++) {
            var option = document.createElement("option");
            option.text = iJaar + i;
            option.value = iJaar + i;
            $('#cboJaar')[0].add(option);
        }

        var mdwID = window.localStorage.getItem("mdwID");
        var jaar = $('#cboJaar')[0][$('#cboJaar')[0].selectedIndex].value;
        var taal = window.localStorage.getItem("TaalKeuze");
        if (taal == null) {
            window.localStorage.setItem("TaalKeuze", 'nl');
            taal = 'nl';
        }
        
        function clearVanDte() {
            $('#dteVan').val('');
            dteVanIngevuld = false;
        }
        function clearTotDte() {
            $('#dteTot').val('');
            dteTotIngevuld = false;
        }

        function styleDteOverview() {
            setDteStyle('#dteOverview');
            popupActive = true;
            popupDte = 'Overview';
            firstclick = true;
            kleurDisabledDagen(huidigeOverviewMaand, '#dteOverview');
        }

        var popupActive = false;
        var popupDte = '';
        var dteTarget = null;
        function showDteVanPopup(target) {
            if ($('#dteTot').val() != '') {
                var arrEinddag = $('#dteTot').val().split('-');
                var einddag = new Date(arrEinddag[2], arrEinddag[1] - 1, arrEinddag[0]);
                $("#dteVanPopup").datepicker("option", "maxDate", einddag);
            }
            var maand = $('#dteVanPopup .ui-datepicker-title span')[0].outerText;
            huidigeVanMaand = maandenHuidig.indexOf(maand) + 1;

            setDteStyle('#dteVanPopup');
            $('#dteVanPopup').css('display', 'inline');
            popupActive = true;
            popupDte = 'Van';

            kleurDisabledDagen(huidigeVanMaand, '#dteVanPopup');
            dteTarget = target;
        }

        function showDteTotPopup(target) {
            if ($('#dteVan').val() != '') {
                var arrStartdag = $('#dteVan').val().split('-');
                var startdag = new Date(arrStartdag[2], arrStartdag[1] - 1, arrStartdag[0]);
                $("#dteTotPopup").datepicker("option", "minDate", startdag);
            }
            var maand = $('#dteTotPopup .ui-datepicker-title span')[0].outerText;
            huidigeTotMaand = maandenHuidig.indexOf(maand) + 1;

            setDteStyle('#dteTotPopup');
            $('#dteTotPopup').css('display', 'inline');
            popupActive = true;
            popupDte = 'Tot';

            kleurDisabledDagen(huidigeTotMaand, '#dteTotPopup');
            dteTarget = target;
        }

        var firstclick = false;
        window.onclick = function (e) {
            if (e.target.id.indexOf('dte') != -1) {
                $('#dteVanPopup').css('display', 'none');
                $('#dteTotPopup').css('display', 'none');
                $('#' + e.target.id + 'Popup').css('display', 'inline');
            } else {
                if (popupActive) {
                    if (e.target.className.indexOf('ui-datepicker') == -1 && !firstclick) {
                        $('#dteVanPopup').css('display', 'none');
                        $('#dteTotPopup').css('display', 'none');
                        popupActive = false;
                        popupDte = '';
                    }
                    firstclick = false;
                }

                if (popupActive != '') {
                    if (popupDte == "Van") {
                        if (e.target.className.indexOf('ui-datepicker-prev') != -1) {
                            huidigeVanMaand -= 1;
                            kleurDisabledDagen(huidigeVanMaand, '#dteVanPopup');
                        }
                        if (e.target.className.indexOf('ui-datepicker-next') != -1) {
                            huidigeVanMaand += 1;
                            kleurDisabledDagen(huidigeVanMaand, '#dteVanPopup');
                        }
                    } else if (popupDte == 'Tot') {
                        if (e.target.className.indexOf('ui-datepicker-prev') != -1) {
                            huidigeTotMaand -= 1;
                            kleurDisabledDagen(huidigeTotMaand, '#dteTotPopup');
                        }
                        if (e.target.className.indexOf('ui-datepicker-next') != -1) {
                            huidigeTotMaand += 1;
                            kleurDisabledDagen(huidigeTotMaand, '#dteTotPopup');
                        }
                    } else if (popupDte == 'Overview') {
                        if (e.target.className.indexOf('ui-datepicker-prev') != -1) {
                            huidigeOverviewMaand -= 1;
                            kleurDisabledDagen(huidigeOverviewMaand, '#dteOverview');
                        }
                        if (e.target.className.indexOf('ui-datepicker-next') != -1) {
                            huidigeOverviewMaand += 1;
                            kleurDisabledDagen(huidigeOverviewMaand, '#dteOverview');
                        }
                    }
                }
            }
        }

        // De opmaak voor de datepickers voorzien
        function setDteStyle(selector) {
            $(selector).addClass('ui-shadow');
            $(selector + ' > div > div').removeClass('ui-corner-all');
            $(selector + ' > div > div').addClass('ui-body-a ui-corner-top');
            $(selector + ' > div > div > a:nth-child(1)').removeClass('ui-link').addClass('ui-btn ui-btn-icon-notext ui-btn-inline ui-icon-arrow-l ui-shadow');
            $(selector + ' > div > div > a:nth-child(2)').removeClass('ui-link').addClass('ui-btn ui-btn-icon-notext ui-btn-inline ui-icon-arrow-r ui-shadow');
            $(selector + ' table').addClass('mobile-enhanced');
            $(selector + ' table thead th').addClass('ui-bar-a');
            $(selector + ' table tbody td').addClass('ui-body-a');

            $(".ui-datepicker-prev").click(function () {
                setDteStyle(selector);
            });

            $(".ui-datepicker-next").click(function () {
                setDteStyle(selector);
            });
        }

        var dagenKortNl = ["Zo", "Ma", "Di", "Wo", "Do", "Vr", "Za"];
        var dagenKortFr = ["Lu", "Ma", "Me", "Je", "Ve", "Sa", "Di"];
        var dagenKortEn = ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"];
        var dagenKortHuidig = dagenKortNl;
        var dagenNl = ["Zondag", "Maandag", "Dinsdag", "Woensdag", "Donderdag", "Vrijdag", "Zaterdag"];
        var dagenFr = ["Dimanche", "Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi"];
        var dagenEn = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
        var dagenHuidig = dagenNl;
        var maandenNl = ["Januari", "Februari", "Maart", "April", "Mei", "Juni", "Juli", "Augustus", "September", "Oktober", "November", "December"];
        var maandenFr = ["Janvier", "Fëvrier", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"];
        var maandenEn = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        var maandenHuidig = maandenNl;

        var dteVanIngevuld = false;
        var dteTotIngevuld = false;
        $('.customDatepicker').datepicker({
            firstDay: 1,
            dateFormat: "dd-mm-yy",
            dayNamesMin: dagenKortHuidig,
            dayNames: dagenHuidig,
            monthNames: maandenHuidig,
            minDate: new Date(jaar, 0, 1),
            //beforeShowDay: $.datepicker.noWeekends,
            onSelect: function (dateText, e) {
                $('#' + dteTarget).val(dateText);
                $('#dteTotPopup').css('display', 'none');
                $('#dteVanPopup').css('display', 'none');
                popupActive = false;

                if (dteTarget == 'dteVan')
                    dteVanIngevuld = true;
                else if (dteTarget == "dteTot")
                    dteTotIngevuld = true;
                if(dteVanIngevuld && dteTotIngevuld)
                    $("#btnDetailDagen").button("enable");
            }
        });
        setDteStyle('.customDatepicker');

        // Een andere taal selecteren
        function changeLang() {
            if($('#rdbNl')[0].checked == true){
                window.localStorage.removeItem("TaalKeuze");
                window.localStorage.setItem("TaalKeuze", 'nl');
            } 
            else if ($('#rdbFr')[0].checked == true) {
                window.localStorage.removeItem("TaalKeuze");
                window.localStorage.setItem("TaalKeuze", 'fr');
            }
            else if ($('#rdbEn')[0].checked == true) {
                window.localStorage.removeItem("TaalKeuze");
                window.localStorage.setItem("TaalKeuze", 'en');
            }
            taal = window.localStorage.getItem("TaalKeuze");
            vertaalTekst(taal);
            reloadSaldi();
            reloadHist();
        }

        function initSaldiTable() {
            $('#tblPCodes thead tr')[0].innerHTML = $('#tblPCodes thead tr th:first-child')[0].outerHTML;
            $('#tblPCodes1')[0].innerHTML = $('#tblPCodes1 th')[0].outerHTML;
            $('#tblPCodes2')[0].innerHTML = $('#tblPCodes2 th')[0].outerHTML;
            $('#tblPCodes3')[0].innerHTML = $('#tblPCodes3 th')[0].outerHTML;
            $('#tblPCodes4')[0].innerHTML = $('#tblPCodes4 th')[0].outerHTML;
            $('#tblPCodes5')[0].innerHTML = $('#tblPCodes5 th')[0].outerHTML;
            $('#tblPCodes6')[0].innerHTML = $('#tblPCodes6 th')[0].outerHTML;
        }

        // Herladen van de saldi
        function reloadSaldi() {
            $('#cboJaar').selectmenu("disable");
            // Saldo van het vorige jaar verwijderen
            initSaldiTable();
            // Nieuwe saldo ophalen
            jaar = $('#cboJaar')[0][$('#cboJaar')[0].selectedIndex].value;
            taal = window.localStorage.getItem("TaalKeuze");
            getSaldi();
        }

        function initHistTable() {
            $('#tblHist thead tr')[0].innerHTML = $('#tblHist thead tr th:first-child')[0].outerHTML;
            $('#tblHist1')[0].innerHTML = $('#tblHist1 th')[0].outerHTML;
            $('#tblHist1')[0].innerHTML = $('#tblHist2 th')[0].outerHTML;
            $('#tblHist3')[0].innerHTML = $('#tblHist3 th')[0].outerHTML;
            $('#tblHist4')[0].innerHTML = $('#tblHist4 th')[0].outerHTML;
            $('#tblHist5')[0].innerHTML = $('#tblHist5 th')[0].outerHTML;
            $('#tblHist6')[0].innerHTML = $('#tblHist6 th')[0].outerHTML;
        }

        function reloadHist() {
            if (histPageInit)
                $('#cboHistItems').selectmenu("disable");

            initHistTable();
            jaar = $('#cboJaar')[0][$('#cboJaar')[0].selectedIndex].value;
            taal = window.localStorage.getItem("TaalKeuze");
            getHistoriek();
        }
        
        var loadingSaldi = true;
        // Ophalen en weergeven van de saldi
        function getSaldi() {
            loadingSaldi = true;
            $('#loadingDivSaldi').css('display', 'inline');
            $("#cboPrestatieC").selectmenu();
            $("#cboPrestatieC").selectmenu("disable");
            $.ajax({
                headers: { 'Access-Control-Allow-Origin': "*" },
                url: url + 'api/verlof/?mwId=' + mdwID + '&jaar=' + jaar + '&taal=' + taal,
                cache: false,
                type: 'GET',
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    if (data.length == 0) {
                        if ($.mobile.activePage.attr('id') == 'home') {
                            switch (taal) {
                                case 'nl':
                                    melding("Er zijn geen saldi beschikbaar.", 5000);
                                    break;
                                case 'fr':
                                    melding("Il n'y a pas de données disponibles.", 5000);
                                    break;
                                case 'en':
                                    melding("There is no data available.", 5000);
                                    break;
                            }
                            $('#cboPrestatieC')[0].innerHTML = '';
                            $("#cboPrestatieC").selectmenu();
                        }
                    } else {
                        verlofSaldi = data;
                        verlofSaldi.sort(sorteerSaldi);

                        $('#cboPrestatieC')[0].innerHTML = '';
                        $.each(verlofSaldi, function (key, pcode) {
                            var option = document.createElement("option");
                            option.text = pcode.omschrijving;
                            option.value = pcode.prestatiecodeID;
                            $('#cboPrestatieC')[0].add(option);
                        });
                        if($.mobile.activePage.attr("id") == 'home')
                            $("#cboPrestatieC").selectmenu("refresh", true);
                        changePrestC();
                    }
                    $('#loadingDivSaldi').css('display', 'none');
                    $('#cboJaar').selectmenu("enable");
                    $('#cboPrestatieC').selectmenu("enable");
                    loadingSaldi = false;
                }
            });
        }
        getSaldi();

        var loadingHist = true;
        function getHistoriek() {
            loadingHist = true;
            $('#loadingDivHist').css('display', 'inline');
            $.ajax({
                headers: { 'Access-Control-Allow-Origin': "*" },
                url: url + 'api/verlof/?mwId=' + mdwID + '&jaar=' + jaar + '&status=1,2,3,4' + '&taal=' + taal,
                cache: false,
                type: 'GET',
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    if (data.length == 0){
                        if ($.mobile.activePage.attr('id') == 'historiek') {
                            switch (taal) {
                                case 'nl':
                                    melding("Er is geen historiek beschikbaar.", 5000);
                                    break;
                                case 'fr':
                                    melding("Il n'y a pas de données disponibles.", 5000);
                                    break;
                                case 'en':
                                    melding("There is no data available.", 5000);
                                    break;
                            }
                        }
                    }   
                    else {
                        historiekItems = data;

                        $('#cboHistItems')[0].innerHTML = '';
                        $.each(historiekItems, function (key, histItem) {
                            var datumStart = histItem.start.split('T')[0];
                            var datumEind = histItem.einde.split('T')[0];

                            var option = document.createElement("option");
                            option.text = datumStart.split('-')[2] + '/' + datumStart.split('-')[1] + ' - ' + datumEind.split('-')[2] + '/' + datumEind.split('-')[1];
                            $('#cboHistItems')[0].add(option);
                        });
                        if ($.mobile.activePage.attr("id") == 'historiek')
                            $("#cboHistItems").selectmenu("refresh", true);
                        changeHistItem();
                    }
                    $('#loadingDivHist').css('display', 'none');
                    if (histPageInit)
                        $('#cboHistItems').selectmenu("enable");
                    loadingHist = false;
                }
            });
        }
        getHistoriek();

        function opvullenRPTKleuren() {
            $.ajax({
                headers: { 'Access-Control-Allow-Origin': "*" },
                url: url + 'api/verlof/?mdwId=' + mdwID + '&iJaar=' + jaar + '&sTaal=' + taal,
                cache: false,
                type: 'GET',
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    var legende = '';
                    $.each(data, function (key, prestatiecode) {
                        legende += '<div><div class="kleur" style="background-color:' + prestatiecode.kleur + ';"></div><p>' + prestatiecode.omschrijving + '</p></div>';
                    });
                    $('#Legende > div')[0].innerHTML = legende;
                }
            });
        }
        opvullenRPTKleuren();

        function kleurDisabledDagen(huidigeMaand, dtpId) {
            var datumMaand = new Date();
            datumMaand.setMonth(huidigeMaand - 1);
            datumMaand.setDate(1);
            
            $.each(uitTeSchakelenDagen, function (key, value) {
                if (parseInt(value.datum.split('-')[1]) == huidigeMaand) {
                    datumMaand = new Date(new Date().getFullYear(), huidigeMaand - 1, parseInt(value.datum.split('-')[0]));
                    var weekInMaand = Math.ceil(Math.abs(datumMaand.getDay() - parseInt(value.datum.split('-')[0])) / 7);
                    var dagInWeek = datumMaand.getDay();
                    weekcheck = datumMaand.getDay() - parseInt(value.datum.split('-')[0]);
                    if (weekcheck <= 0)
                        weekInMaand += 1;

                    var selector = dtpId + ' tbody tr:nth-child(' + weekInMaand + ') td:nth-child(' + dagInWeek + ')';
                    $(selector).css('background-color', value.kleur);
                }
            });
            
            if (!weekendWerk) {
                for (i = 1; i <= $(dtpId + ' tbody tr').length; i++) {
                    selector = dtpId + ' tbody tr:nth-child(' + i + ') td:nth-child(6)';
                    if ($(selector).children().length > 0)
                        $(selector).css('background-color', '#B0B0B0');
                    selector = dtpId + ' tbody tr:nth-child(' + i + ') td:nth-child(7)';
                    if ($(selector).children().length > 0)
                        $(selector).css('background-color', '#B0B0B0');
                }
            }
        }

        var huidigeVanMaand = new Date().getMonth() + 1;
        var huidigeTotMaand = new Date().getMonth() + 1;
        var huidigeOverviewMaand = new Date().getMonth() + 1;
        var uitTeSchakelenDagen = null;
        var weekendWerk = true;
        var loadingFeest = false;
        var dteDisabled = false;

        function ophalenFeestdagen() {
            loadingFeest = true;
            $.ajax({
                headers: { 'Access-Control-Allow-Origin': "*" },
                url: url + 'api/verlof/?mwId=' + mdwID + '&jaar=' + jaar + '&sTaal=' + taal,
                cache: false,
                type: 'GET',
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    loadingFeest = false;
                    uitTeSchakelenDagen = data;
                    if (dteDisabled) {
                        $('#dteVan').textinput("option", "disabled", false);
                        $('#dteTot').textinput("option", "disabled", false);
                        dteDisabled = false;
                    }
                    if(data.length != 0)
                        weekendWerk = data[0].werkWeekend;
                }
            });
        }
        ophalenFeestdagen();

        var DagenVoorVerlofAanvraag;

        $("#btnDetailDagen").click(function (event) {
            event.preventDefault();
            haalDagenOp()
        });
        
        function haalDagenOp() {
           $('#loadingDivDetailsDagen').css('display', 'inline');
           $.ajax({
                headers: { 'Access-Control-Allow-Origin': "*" },
                url: url + 'api/verlof/?mwId=' + mdwID + '&startdag=' + $('#dteVan').val() + '&einddag=' + $('#dteTot').val() + '&sTaal=' + taal,
                cache: false,
                type: 'GET',
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    if (typeof data == 'string')
                        melding(data, 5000);
                    else {
                        DagenVoorVerlofAanvraag = data;
                        $("#colSet")[0].innerHTML = '';
                        var content = '';
                        for (i = 0; i < data.length; i++) {
                            var dag = new Date(data[i].dag.split('T')[0].split('-')[0], data[i].dag.split('T')[0].split('-')[1] - 1, data[i].dag.split('T')[0].split('-')[2]);
                            var dagNaam = dagenHuidig[dag.getDay()];
                            var dagNummer = dag.getDate();
                            var maandNaam = maandenHuidig[dag.getMonth()];
                            var datumJaar = dag.getFullYear();
                            content += "<div data-role='collapsible' data-theme='a' id='collap" + i + "' data-collapsed='true'><h3>" + dagNaam + " " + dagNummer + " " + maandNaam + " " + datumJaar + "</h3><select id='collapSel" + i + "'>";
                            for (y = 0; y < verlofSaldi.length; y++) {
                                content += '<option value="' + verlofSaldi[y].prestatiecodeID + '">' + verlofSaldi[y].omschrijving + '</option>';
                            }
                                
                            content += "</select><label>";
                            switch (taal) {
                                case 'nl':
                                    content += "Aantal uur";
                                    break;
                                case 'fr':
                                    content += "Nombre d'heurs";
                                    break;
                                case 'en':
                                    content += "Number of hours";
                                    break;
                            }
                            if (data[i].type == 'Uren')
                                content += "</label><input class='collapAantUur' id='collapTxt" + i + "' type='time' value='" + data[i].aantaluur + "' /></div>";
                            else {
                                content += "</label><select>";
                                switch (taal) {
                                    case 'nl':
                                        content += "<option value='D100'>dag</option>";
                                        content += "<option value='V50'>voormiddag</option>";
                                        content += "<option value='N50'>namiddag</option>";
                                        break;
                                    case 'fr':
                                        content += "<option value='D100'>jour</option>";
                                        content += "<option value='V50'>matinée</option>";
                                        content += "<option value='N50'>après-midi</option>";
                                        break;
                                    case 'en':
                                        content += "<option value='D100'>day</option>";
                                        content += "<option value='V50'>AM</option>";
                                        content += "<option value='N50'>PM</option>";
                                        break;
                                }
                                content += "</select></div>";
                            }
                                                     
                        }
                        content += "<div class='ui-btn ui-input-btn ui-corner-all ui-shadow ui-btn-a'>";
                        content += "<input data-theme='b' id='btnDagenBevestigen' type='submit' value='Bevestigen' />Bevestigen</input></div>";
                        $("#colSet")[0].innerHTML = content;

                        var iTeller = 0;
                        for (i = 0; i < data.length; i++) {
                            if (verlofSaldi.length > 1) {
                                if (verlofSaldi[iTeller].aantaldagen > 0) {
                                    var selector = '#collapSel' + i;
                                    $(selector)[0].selectedIndex = iTeller;
                                    verlofSaldi[iTeller].aantaldagen -= 1;
                                } else {
                                    if (verlofSaldi[iTeller].aantaldagen <= 0) {
                                        while (verlofSaldi[iTeller].aantaldagen <= 0) {
                                            if (iTeller + 1 < verlofSaldi.length) {
                                                iTeller += 1;
                                            }
                                            else {
                                                return;
                                            }
                                        }

                                        if (iTeller < verlofSaldi.length && verlofSaldi[iTeller].aantaldagen > 0) {
                                            var selector = '#collapSel' + i;
                                            $(selector)[0].selectedIndex = iTeller;
                                            verlofSaldi[iTeller].aantaldagen -= 1;
                                        }
                                        else {
                                            //ddlPres.SelectedIndex = 0;
                                        }
                                    }
                                }
                            } else {
                                //ddlPres.SelectedValue = "";
                            }
                        }
                        window.location.href = "./home.html#DetailsDagen";
                    }
                    $('#loadingDivDetailsDagen').css('display', 'none');
                }
            });
        }

        function sorteerSaldi(a, b) {
            if (a.belang == 0)
                a.belang = 999999999;
            if (b.belang == 0)
                b.belang = 999999999;
            if (a.belang < b.belang)
                return -1;
            if (a.belang > b.belang)
                return 1;
            return 0;
        }

        $(document).on('pagebeforeshow', '#DetailsDagen', function () {
            $('#colSet select').selectmenu();
            $('#colSet .collapAantUur').textinput();
            $("#btnDagenBevestigen").button();

            $('#btnDagenBevestigen').click(function (event) {
                event.preventDefault();
                dagenBevestigen();
            })
            
            $('#colSet div[data-role="collapsible"]').collapsible({
                expand: function (event, ui) {
                    /*var collapId = this.id.substring(6, this.id.length);
                    $('#colSet #collap' + collapId + ' select').selectmenu();
                    $('#colSet #collap' + collapId + ' .collapAantUur').textinput();*/
                }
            });            
        });

        $(document).on('pagebeforeshow', '#home', function () {
            if (loadingSaldi) {
                $('#cboJaar').selectmenu("disable");
                $('#cboPrestatieC').selectmenu("disable");
            }

            $("#cboPrestatieC").selectmenu("refresh", true);
            vertaalTekst(taal);
        });

        var histPageInit = false;
        $(document).on('pagebeforeshow', '#historiek', function () {
            if (loadingHist) {
                $('#cboHistItems').selectmenu("disable");
            }
            
            $("#cboHistItems").selectmenu("refresh", true);
            vertaalTekst(taal);
            histPageInit = true;
        });
        $(document).on('pagebeforeshow', '#Opties', function () {
            switch (taal) {
                case 'nl':
                    $("input[type='radio']:first").attr("checked", "checked");
                    break;
                case 'fr':
                    $("input[type='radio']:eq(1)").attr("checked", "checked");
                    break;
                case 'en':
                    $("input[type='radio']:last").attr("checked", "checked");
                    break;
            }
            $("input[type='radio']").checkboxradio().checkboxradio("refresh");
            vertaalTekst(taal);
        });
        $(document).on('pagebeforeshow', '#verlofAanv', function () {
            if (!dteVanIngevuld || !dteTotIngevuld)
                $("#btnDetailDagen").button("disable");
            if (loadingFeest) {
                $('#dteVan').textinput("option", "disabled", true);
                $('#dteTot').textinput("option", "disabled", true);
            }
            dteDisabled = true;
        });
        function dagenBevestigen() {
            var UurLeeg = false;
            $.each(DagenVoorVerlofAanvraag, function (key, value) {
                var itemIndex = key + 1;
                var selector = '#colSet > div:nth-child(' + itemIndex + ')';
                //$('#colSet > div:nth-child(1) div.ui-select select')
                if (value.type == 'Uren') {
                    var pCodeId = $(selector + ' div.ui-select select')[0][$(selector + ' div.ui-select select')[0].selectedIndex].value;
                    alert(pCodeId);
                    var aantaluur = $(selector + ' div div.ui-input-text input')[0].value;
                    alert(aantaluur);

                    if (aantaluur == '')
                        UurLeeg = true;
                    value["prestatiecodeID"] = pCodeId;
                    value["aantaluur"] = aantaluur;
                    
                } else {
                    var pCodeId = $(selector + ' div div.ui-select:nth-child(1) select')[0][$(selector + ' div div.ui-select:nth-child(1) select')[0].selectedIndex].value;
                    var aantaluur = $(selector + ' div div.ui-select')[1].children[0].children[1][$(selector + ' div div.ui-select')[1].children[0].children[1].selectedIndex].value;

                    value["prestatiecodeID"] = pCodeId;
                    value["aantaluur"] = aantaluur;
                }
            });

            if (UurLeeg) {
                switch (taal) {
                    case 'nl':
                        melding('Gelieve alle velden in te vullen.', 5000);
                        break;
                    case 'fr':
                        melding("Remplir tous les champs s'il vous plaît.", 5000);
                        break;
                    case 'en':
                        melding('Please fill in all the fields.',5000);
                        break;
                }
            } else {
                var gegevens = {
                    startDag: $('#dteVan').val(),
                    eindDag: $('#dteTot').val(),
                    mwid: mdwID, jaar: jaar,
                    sTekst: $('#txaRedenVal').val(),
                    sTaal: taal,
                    jaar: jaar,
                    lijstDagen: DagenVoorVerlofAanvraag
                };

                $.ajax({
                    headers: { 'Access-Control-Allow-Origin': "*" },
                    url: url + 'api/verlof/',
                    cache: false,
                    type: 'POST',
                    contentType: 'application/json; charset=utf-8',
                    data: JSON.stringify(gegevens),
                    success: function (data) {
                        alert('dagen bevestigen data received');
                        if (typeof data == 'string')
                            melding(data, 10000);
                        if (typeof data != 'string') {
                            $('#dteVan').val('');
                            $('#dteTot').val('');
                            $('#txaRedenVal').val('');
                        }

                        window.location.href = "./home.html#home";
                        reloadSaldi();
                        reloadHist();
                        ophalenFeestdagen();
                    }
                });
            }
        }

        function melding(bericht, fedeDelay) {
            $('.melding').text(bericht);
            $('.melding').fadeIn();
            window.clearTimeout(timeout);
            timeout = setTimeout(function () { $('.melding').fadeOut(); }, fedeDelay);
        }

        // De gebruiker logt uit
        function logout() {
            window.localStorage.removeItem("mdwID");
            window.location.href = "./index.html#login";
        }

        window.onerror = function (errorMessage, errorUrl, errorLine) {
            $('#txaRedenVal').val($('#txaRedenVal').val() + '-------' + errorMessage + '     -     ' + errorLine);
        }
    </script>
</body>
</html>
